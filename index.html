<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bíblia online 3- Completa com todos os livros</title>
  <link rel="manifest" href="manifest.json" />
   <meta name="theme-color" content="#4a342e" />
    <link rel="icon" type="image/png" href="icon-192x192.png" />
  <link rel="apple-touch-icon" href="icon-192x192.png" />
  <style>
  body {
    font-family: 'Georgia', serif;
    max-width: 720px;
    margin: 2em auto;
    padding: 1.2em 2em;
    background: #fdf6f0;
    color: #4a342e;
    border-radius: 12px;
    box-shadow: 0 0 15px #b49982aa;
  }
  h1 {
    text-align: center;
    color: #6d4c41;
    margin-bottom: 1em;
  }
  section {
    margin-bottom: 2.5em;
  }
  h2 {
    border-bottom: 2px solid #a1887f;
    padding-bottom: 0.3em;
    margin-bottom: 1em;
    color: #5d4037;
  }
  label {
    font-weight: bold;
    display: block;
    margin-top: 1em;
    margin-bottom: 0.3em;
  }
  select, input[type="number"], input[type="text"] {
    width: 100%;
    padding: 0.6em 0.8em;
    font-size: 1.1em;
    border-radius: 6px;
    border: 1px solid #c7b299;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
  }
  select:focus, input[type="number"]:focus, input[type="text"]:focus {
    border-color: #6d4c41;
    outline: none;
  }
  button {
    margin-top: 1.2em;
    width: 100%;
    background: #6d4c41;
    color: white;
    font-weight: 600;
    font-size: 1.2em;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #5b3e2b;
  }
  #resultado, #resultadoLocal {
    margin-top: 1em;
    background: #f7e7d3;
    padding: 1em 1.2em;
    border-radius: 8px;
    min-height: 3em;
    max-height: 360px;
    overflow-y: auto;
    font-size: 1.1em;
    line-height: 1.4em;
    box-shadow: inset 0 0 8px #cbb299;
  }
  .versiculo {
    margin-bottom: 1.2em;
    border-left: 5px solid #a6784a;
    padding-left: 1em;
  }
  .referencia {
    font-weight: 700;
    margin-bottom: 0.2em;
    color: #5d4037;
    font-size: 1.05em;
  }
  .msg-erro {
    color: #b00000;
    font-weight: 600;
  }
  @media(max-width: 480px) {
    body {
      margin: 1em;
      padding: 1em;
    }
  }
</style>
</head>
<body>

<h1>Bíblia Online - Busca por Versículos e Palavras -Nós 3-</h1>

<section aria-label="Busca exata de versículos">
  <h2>Busca Exata: Livro, Capítulo e Versículo</h2>
  <form id="formExato" aria-describedby="descBuscaExata">
    <div id="descBuscaExata" style="display:none;">Escolha livro, capítulo e versículo para buscar exatamente esse versículo online.</div>
    <label for="livroExato">Livro</label>
    <select id="livroExato" required aria-required="true" aria-label="Selecione o livro da Bíblia">
      <option value="">-- Escolha o Livro --</option>
      <option value="gn">Gênesis</option>
      <option value="ex">Êxodo</option>
      <option value="lv">Levítico</option>
      <option value="nm">Números</option>
      <option value="dt">Deuteronômio</option>
      <option value="js">Josué</option>
      <option value="jz">Juízes</option>
      <option value="rt">Rute</option>
      <option value="1sm">1 Samuel</option>
      <option value="2sm">2 Samuel</option>
      <option value="1rs">1 Reis</option>
      <option value="2rs">2 Reis</option>
      <option value="1cr">1 Crônicas</option>
      <option value="2cr">2 Crônicas</option>
      <option value="ed">Esdras</option>
      <option value="ne">Neemias</option>
      <option value="et">Ester</option>
      <option value="jó">Jó</option>
      <option value="sl">Salmos</option>
      <option value="pv">Provérbios</option>
      <option value="ec">Eclesiastes</option>
      <option value="ct">Cânticos</option>
      <option value="is">Isaías</option>
      <option value="jr">Jeremias</option>
      <option value="lm">Lamentações</option>
      <option value="ez">Ezequiel</option>
      <option value="dn">Daniel</option>
      <option value="os">Oseias</option>
      <option value="jl">Joel</option>
      <option value="am">Amós</option>
      <option value="ob">Obadias</option>
      <option value="jn">Jonas</option>
      <option value="mq">Miquéias</option>
      <option value="na">Naum</option>
      <option value="hc">Habacuque</option>
      <option value="sf">Sofonias</option>
      <option value="ag">Ageu</option>
      <option value="zc">Zacarias</option>
      <option value="ml">Malaquias</option>
      <option value="mt">Mateus</option>
      <option value="mc">Marcos</option>
      <option value="lc">Lucas</option>
      <option value="jo">João</option>
      <option value="atos">Atos</option>
      <option value="rm">Romanos</option>
      <option value="1co">1 Coríntios</option>
      <option value="2co">2 Coríntios</option>
      <option value="gl">Gálatas</option>
      <option value="ef">Efésios</option>
      <option value="fp">Filipenses</option>
      <option value="cl">Colossenses</option>
      <option value="1ts">1 Tessalonicenses</option>
      <option value="2ts">2 Tessalonicenses</option>
      <option value="1tm">1 Timóteo</option>
      <option value="2tm">2 Timóteo</option>
      <option value="tt">Tito</option>
      <option value="fm">Filemom</option>
      <option value="hb">Hebreus</option>
      <option value="tg">Tiago</option>
      <option value="1pe">1 Pedro</option>
      <option value="2pe">2 Pedro</option>
      <option value="1jo">1 João</option>
      <option value="2jo">2 João</option>
      <option value="3jo">3 João</option>
      <option value="jd">Judas</option>
      <option value="ap">Apocalipse</option>
    </select>

    <label for="capituloExato">Capítulo</label>
    <input type="number" id="capituloExato" min="1" required aria-required="true" />

    <label for="versiculoExato">Versículo</label>
    <input type="number" id="versiculoExato" min="1" required aria-required="true" />

    <button type="submit" aria-label="Buscar versículo exato">Buscar Versículo</button>
  </form>
  <div id="resultado" role="region" aria-live="polite">Aqui aparecerá o versículo buscado.</div>
</section>

<section aria-label="Busca por palavra no texto bíblico">
  <h2>Busca por Palavra ou Trecho (base local simplificada)</h2>
  <form id="formLocal" aria-describedby="descBuscaLocal">
    <div id="descBuscaLocal" style="display:none;">Digite uma palavra ou trecho para buscar na base local.</div>
    <label for="termoLocal">Digite palavra ou trecho</label>
    <input type="text" id="termoLocal" placeholder="Exemplo: amor, fé, Jesus" required aria-required="true" />
    <button type="submit" aria-label="Buscar por palavra">Buscar Palavra</button>
  </form>
  <div id="resultadoLocal" role="region" aria-live="polite">Resultados da busca por palavra aparecerão aqui.</div>
</section>

<script>
  // Base local simplificada (adicione mais versículos para ampliar)
  const baseLocal = [
    { book: "Gênesis", chapter: 1, verse: 1, text: "No princípio criou Deus os céus e a terra." },
    { book: "Gênesis", chapter: 1, verse: 27, text: "Criou Deus o homem à sua imagem..." },
    { book: "Salmos", chapter: 23, verse: 1, text: "O Senhor é o meu pastor; nada me faltará." },
    { book: "João", chapter: 3, verse: 16, text: "Porque Deus amou o mundo de tal maneira que deu o seu Filho unigênito..." },
    { book: "Mateus", chapter: 5, verse: 9, text: "Bem-aventurados os pacificadores, porque serão chamados filhos de Deus." },
    { book: "Romanos", chapter: 8, verse: 28, text: "Sabemos que Deus age em todas as coisas para o bem daqueles que o amam." }
  ];

  // Elementos do DOM
  const formExato = document.getElementById('formExato');
  const resultado = document.getElementById('resultado');
  const formLocal = document.getElementById('formLocal');
  const resultadoLocal = document.getElementById('resultadoLocal');

  // Mapeamento dos livros para API bible-api.com (códigos em minúsculo)
  // Usar o mesmo value do select
  const livroMap = {
    gn: 'genesis',
    ex: 'exodus',
    lv: 'leviticus',
    nm: 'numbers',
    dt: 'deuteronomy',
    js: 'joshua',
    jz: 'judges',
    rt: 'ruth',
    '1sm': '1-samuel',
    '2sm': '2-samuel',
    '1rs': '1-kings',
    '2rs': '2-kings',
    '1cr': '1-chronicles',
    '2cr': '2-chronicles',
    ed: 'ezra',
    ne: 'nehemiah',
    et: 'esther',
    jó: 'job',
    sl: 'psalms',
    pv: 'proverbs',
    ec: 'ecclesiastes',
    ct: 'song-of-solomon',
    is: 'isaiah',
    jr: 'jeremiah',
    lm: 'lamentations',
    ez: 'ezekiel',
    dn: 'daniel',
    os: 'hosea',
    jl: 'joel',
    am: 'amos',
    ob: 'obadiah',
    jn: 'jonah',
    mq: 'micah',
    na: 'nahum',
    hc: 'habakkuk',
    sf: 'zephaniah',
    ag: 'haggai',
    zc: 'zechariah',
    ml: 'malachi',
    mt: 'matthew',
    mc: 'mark',
    lc: 'luke',
    jo: 'john',
    atos: 'acts',
    rm: 'romans',
    '1co': '1-corinthians',
    '2co': '2-corinthians',
    gl: 'galatians',
    ef: 'ephesians',
    fp: 'philippians',
    cl: 'colossians',
    '1ts': '1-thessalonians',
    '2ts': '2-thessalonians',
    '1tm': '1-timothy',
    '2tm': '2-timothy',
    tt: 'titus',
    fm: 'philemon',
    hb: 'hebrews',
    tg: 'james',
    '1pe': '1-peter',
    '2pe': '2-peter',
    '1jo': '1-john',
    '2jo': '2-john',
    '3jo': '3-john',
    jd: 'jude',
    ap: 'revelation'
  };

  // Busca exata com API
  formExato.addEventListener('submit', async e => {
    e.preventDefault();

    const livroSelecionado = document.getElementById('livroExato').value;
    const cap = document.getElementById('capituloExato').value.trim();
    const vers = document.getElementById('versiculoExato').value.trim();

    if (!livroSelecionado || !cap || !vers) {
      resultado.innerHTML = `<p class="msg-erro">Por favor, preencha todos os campos para a busca exata.</p>`;
      return;
    }

    resultado.textContent = 'Buscando versículo...';

    const livroAPI = livroMap[livroSelecionado];
    if (!livroAPI) {
      resultado.innerHTML = `<p class="msg-erro">Livro não suportado para a API.</p>`;
      return;
    }

    try {
      const url = `https://bible-api.com/${livroAPI}+${cap}:${vers}?translation=almeida`;
      const res = await fetch(url);

      if (!res.ok) throw new Error('Versículo não encontrado');

      const data = await res.json();

      if (!data.text) {
        resultado.innerHTML = `<p class="msg-erro">Versículo não encontrado.</p>`;
        return;
      }

      resultado.innerHTML = `
        <div class="versiculo" tabindex="0">
          <div class="referencia">${data.reference}</div>
          <div>${data.text.replace(/\n/g, '<br>')}</div>
        </div>
      `;

    } catch (error) {
      resultado.innerHTML = `<p class="msg-erro">Erro: ${error.message}</p>`;
    }
  });

  // Busca por palavra na base local
  formLocal.addEventListener('submit', e => {
    e.preventDefault();

    const termo = document.getElementById('termoLocal').value.trim().toLowerCase();

    if (!termo) {
      resultadoLocal.textContent = 'Digite uma palavra ou trecho para buscar.';
      return;
    }

    const resultados = baseLocal.filter(v => v.text.toLowerCase().includes(termo));

    if (resultados.length === 0) {
      resultadoLocal.textContent = 'Nenhum versículo encontrado na base local.';
      return;
    }

    resultadoLocal.innerHTML = resultados.map(v => `
      <div class="versiculo" tabindex="0">
        <div class="referencia">${v.book} ${v.chapter}:${v.verse}</div>
        <div>${v.text}</div>
      </div>
    `).join('');
  });
</script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('✅ Service Worker registrado', reg))
          .catch(err => console.error('❌ Erro ao registrar o SW:', err));
      });
    }
  </script>
</body>
</html>
